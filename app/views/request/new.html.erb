<h1><%= @document.first("title_tsim") %></h1>
<% if @request.item["itemCategory"] == "journal" %>
  <%= render Blacklight::Document::ThumbnailComponent.new(presenter: document_presenter(@document), counter: document_counter_with_offset(document_counter ||= 0)) %>
<% end %>

<div class="row mt-4 mb-4">
  <p class="col-12 col-lg-8"><%= t("requesting.prompt") %></p>
</div>
<!--<div class="col">-->
  <div class="row">
    <div class="col-12">
      <dl class="document-metadata row mb-0">
        <% if @item["pickupLocation"].present? %>
          <dt class="col-12 col-md-12 col-lg-3"><%= t("requesting.metadata.collect_from") %></dt>
          <dd class="col col-md-12 col-lg-9"><%= @item["effectiveLocationDisplayName"] %></dd>
        <% end %>

        <dt class="col-12 col-md-12 col-lg-3"><%= t("requesting.metadata.call_number") %></dt>
        <dd class="col col-md-12 col-lg-9">
          <p class="mb-0"><%= @request.item["itemLevelCallNumber"] %>
            <% if @request.item["itemCategory"] == "monograph" && @request.item["enumeration"].present? %>
              <br>Copy: <%= @request.item["enumeration"] %>
            <% end %></p>
        </dd>

        <dt class="col-12 col-md-12 col-lg-3"><%= t("requesting.metadata.status") %></dt>
        <dd class="col col-md-12 col-lg-9"><%= @request.item["status"]["name"] %></dd>

        <% if recent_item_issue_held(@request.holding).present? %>
          <dt class="col-12 col-md-12 col-lg-3"><%= t("requesting.metadata.recent_items") %></dt>
          <dd class="col col-md-12 col-lg-9">
            <ul class="list-unstyled">
              <% recent_item_issue_held(@request.holding).each do |statement| %>
                <li><%= statement %></li>
              <% end %>
            </ul>
          </dd>
        <% end %>

        <% if items_issues_held(@request.holding).present? %>
          <dt class="col-12 col-md-12 col-lg-3"><%= t("requesting.metadata.items_held") %></dt>
          <dd class="col col-md-12 col-lg-9">
            <ul class="list-unstyled">
              <% items_issues_held(@request.holding).each do |statement| %>
                <% statement.each do |issue| %>
                  <li><%= issue %></li>
                <% end %>
              <% end %>
            </ul>
          </dd>
        <% end %>

        <% if supplements(@request.holding).present? %>
          <dt class="col-12 col-md-12 col-lg-3"><%= t("requesting.metadata.supplements") %></dt>
          <dd class="col col-md-12 col-lg-9">
            <ul class="list-unstyled">
              <% supplements(@request.holding).each do |statement| %>
                <% statement.each do |supplement| %>
                  <li><%= supplement %></li>
                <% end %>
              <% end %>
            </ul>
          </dd>
        <% end %>

        <% if indexes(@request.holding).present? %>
          <dt class="col-12 col-md-12 col-lg-3"><%= t("requesting.metadata.indexes") %></dt>
          <dd class="col col-md-12 col-lg-9">
            <ul class="list-unstyled">
              <% indexes(@request.holding).each do |statement| %>
                <% statement.each do |index| %>
                  <li><%= index %></li>
                <% end %>
              <% end %>
            </ul>
          </dd>
        <% end %>
      </dl>
    </div>
  </div>
<!--</div>-->

<%= render "form", request: @request %>
